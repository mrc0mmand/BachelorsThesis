%=========================================================================
% (c) Michal Bidlo, Bohuslav KÅ™ena, 2008

\chapter{Introduction}
\chapter{SSL/TLS}
    \textit{Secure Socket Layer}~(SSL) and its successor
    \textit{Transport Layer Security}~(TLS) are cryptographic protocols
    designed to provide communications security over a computer network. As
    the latest version of the SSL protocol (version~3~\cite{rfc6101}) was
    deprecated in June~2015~\cite{rfc7568} it will not be discussed
    further in this thesis.
\section{Overview}
    The primary goal of the TLS protocol is to provide privacy and data
    integrity between two communicating applications. The structure of
    the protocol comprises of two layers: the TLS Record Protocol and
    the TLS Handshake Protocol.

    The TLS Record Protocol lies at the lowest level, above some reliable
    transport protocol (e.g., TCP~\footnote{Transmission Control Protocol}).
    This protocol provides security which has following properties:
    \begin{itemize}
        \item The connection is private. Symmetric cryptography is used
        for data encryption (e.g., AES~\footnote{Advanced Encryption Standard},
        Camellia, 3DES~\footnote{Triple DES (Data Encryption Standard)}, etc.).
        The keys for the symmetric encryption are generated uniquely
        for each connection
        and are based on a secret negotiated by another protocol
        (such as the TLS Handshake Protocol). The TLS Record Protocol can also
        be used without encryption.
        \item The connection is reliable. Message transport includes
        a message integrity check using a keyed
        MAC~\footnote{Message Authentication Code}. Secure hash functions
        (e.g., SHA-1~\footnote{Secure Hash Algorithm}, SHA-256, etc.) are
        used for MAC computations. The MAC is used to prevent undetected
        data loss or data modification during transmission.
    \end{itemize}

    The TLS Record Protocol is used for encapsulation of various higher-level
    protocols. One such protocol is the TLS Handshake Protocol. This protocol
    allows client authentication and negotiation of necessary properties
    of the TLS connection, like encryption algorithm or cryptographic keys,
    before the data transmission. The TLS Handshake Protocol provides
    connection security which has following properties:
    \begin{itemize}
        \item The peer's identity can be authenticated using asymmetric, or
        public key, cryptography (e.g.,
        RSA~\footnote{Rivest-Shamir-Adleman cryptosystem},
        ECDSA~\footnote{Elliptic Curve Digital Signature Algorithm}, etc.).
        This authentication is not mandatory, but it is generally required
        for at least one of the peers.
        \item The negotiation of a shared secret is secure. Obtaining of
        the shared secred is infeasible for any eavesdropper or attacker,
        who can place himself in the middle of the authenticated connection.
        \item The negotiation is reliable. The negotiation communication
        cannot be modified without being detected by the parties to the
        communication.~\cite{rfc5246}
    \end{itemize}

    In addition to the properties above, a carefully configured TLS connection
    can provide another important privacy-related property: forward secrecy.
    This property ensures, that any future disclosure or leakage of encryption
    keys cannot be used to decrypt any TLS communnications recorded or
    eavesdropped in the past.

    TLS supports various combinations of algorithms for key exchange, data
    encryption and message integrity authentication, which is an important fact
    for this thesis and can cause severe issues when these combinations
    are configured or implemented improperly. Along with these combinations,
    TLS supports many extensions further extending its capabilities and possibilites,
    which will be described further in this thesis.

\section{TLS handshake}
- three subprotocols \\
    - security parameters negotiation \\
    - authentication \\
    - error reporting
\subsection{The Handshake Protocol}
- session negotiation \\
    - session identifier \\
    - peer certificate \\
    - compression method \\
    - cipher spec \\
    - master secret \\
    - is resumable \\
\\
- handshake: \\
    - exchange hello messages (algorithms, random values, session resumption) \\
    - exchange crypto parameters for premaster secret \\
    - exchange certs and crypto info for authentication \\
    - generate a master secret from the premaster secret and random values \\
    - provide security params to the TLS Record Layer \\
    - allow parameter verification between peers \\
\\
- types of handshake \\
    - basic \\
    - client auth \\
    - resumed \\
        - sessionID \\
        - tickets
\subsection{Change Cipher Spec Protocol}
- signal transitions in ciphering strategies \\
- ChangeCipherSpec message \\
- when recieved, read pending state is copied into the read current state \\
- after sending, sender must copy write pening state into the write active state
\subsection{Alert protocol}
- alert message has a severiry indicator (warning/fatal) and a content \\
- fatal => immediate connection termination
\subsubsection{Closure alerts}
- client must tell others that the connection is ending to prevent truncation
attacks
\subsubsection{Error alerts}
- simple error handling => when error is detected, an error message is sent
to the other party
- list of defined error alerts...

